(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"21ee":function(e,s,t){},"44c2":function(e,s,t){"use strict";t("21ee")},"5b17":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",{ref:"pageChat",staticClass:"flex column"},[e.otherUserDetails.online?e._e():t("q-banner",{staticClass:"text-white\n    bg-grey-4\n    text-center\n    fixed-top",attrs:{"inline-actions":""}},[e._v("\n      "+e._s(e.otherUserDetails.name)+" is offline\n  ")]),t("div",{staticClass:"q-pa-md column col justify-end",class:{invisible:!e.showMessages}},e._l(e.messages,(function(s,a){return t("q-chat-message",{key:a,attrs:{name:"me"==s.from?e.userDetails.name:e.otherUserDetails.name,text:[s.text],sent:"me"==s.from}})})),1),t("q-footer",{attrs:{elevated:""}},[t("q-toolbar",{staticClass:"bg-orange-5"},[t("q-form",{staticClass:"full-width",on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.sendMessage(s)}}},[t("q-input",{ref:"keepfocus",staticClass:"full-width",attrs:{standout:"bg-grey-1 text-grey-5","bg-color":"white",rounded:"",outlined:"",label:"Message",dense:""},on:{blur:e.scrollToBottom},scopedSlots:e._u([{key:"after",fn:function(){return[t("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:e.sendMessage}})]},proxy:!0}]),model:{value:e.newMessage,callback:function(s){e.newMessage=s},expression:"newMessage"}})],1)],1)],1)],1)},r=[],o=t("ded3"),n=t.n(o),i=t("2f62"),l=t("e883"),u={mixins:[l["a"]],data(){return{newMessage:"",showMessages:!1}},computed:n()({},Object(i["d"])("store",["messages","userDetails"])),watch:{messages:function(e){Object.keys(e).length&&(this.scrollToBottom(),setTimeout((()=>{this.showMessages=!0}),20))}},methods:n()(n()({},Object(i["b"])("store",["firebaseGetMessage","firebaseStopGetMessage","firebaseSendMessage"])),{},{scrollToBottom(){let e=this.$refs.pageChat.$el;setTimeout((()=>{window.scrollTo(0,e.scrollHeight)}),20)},sendMessage(){this.firebaseSendMessage({message:{text:this.newMessage,from:"me"},otherUserID:this.$route.params.otherUserID}),this.newMessage="",this.$refs.keepfocus.focus()}}),mounted(){this.firebaseGetMessage(this.$route.params.otherUserID)},destroyed(){this.firebaseStopGetMessage()}},c=u,f=(t("44c2"),t("2877")),h=Object(f["a"])(c,a,r,!1,null,null,null);s["default"]=h.exports},e883:function(e,s,t){"use strict";s["a"]={computed:{otherUserDetails(){return this.$store.state.store.users[this.$route.params.otherUserID]?this.$store.state.store.users[this.$route.params.otherUserID]:{}}}}}}]);